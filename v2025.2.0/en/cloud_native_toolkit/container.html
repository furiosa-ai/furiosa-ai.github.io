
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-0HTTHGM3MD"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-0HTTHGM3MD');
    </script>
    
    <title>Container Support &#8212; FuriosaAI Developer Center 2025.2.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=c490c724" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=39353cc5"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'cloud_native_toolkit/container';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://raw.githubusercontent.com/jinwookbok/furiosa-ai.github.io/refs/heads/version/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '2025.2.0';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            true;
        </script>
    <link rel="icon" href="../_static/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Kubernetes Plugins" href="kubernetes.html" />
    <link rel="prev" title="Cloud Native Toolkit" href="intro.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="2025.2.0" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/doc-logo-dark.svg" class="logo__image only-light" alt=""/>
    <img src="../_static/doc-logo-light.svg" class="logo__image only-dark pst-js-only" alt=""/>
  
  
    <p class="title logo__title">
            <div class='sidebar-title mr-auto'>
                Furiosa Docs
            </div>
        </p>
  
</a></div>
        <div class="sidebar-primary-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../overview/rngd.html">FuriosaAI RNGD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/software_stack.html">FuriosaAI’s Software Stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/supported_models.html">Supported Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whatsnew/index.html">What’s New</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/roadmap.html">Roadmap</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../getting_started/prerequisites.html">Installing Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/furiosa_llm.html">Quick Start with Furiosa-LLM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/furiosa_mlperf.html">Running MLPerf™ Inference Benchmark</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/upgrade_guide.html">Upgrading FuriosaAI’s Software</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Furiosa-LLM</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../furiosa_llm/intro.html">Furiosa-LLM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../furiosa_llm/furiosa-llm-serve.html">OpenAI-Compatible Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../furiosa_llm/model-preparation.html">Model Preparation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../furiosa_llm/build-artifacts-by-examples.html">Building Model Artifacts By Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../furiosa_llm/model-parallelism.html">Model Parallelism</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../furiosa_llm/reference.html">API Reference</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../furiosa_llm/reference/llm.html">LLM class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../furiosa_llm/reference/sampling_params.html">SamplingParams class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../furiosa_llm/reference/artifact_builder.html">ArtifactBuilder</a></li>



<li class="toctree-l2"><a class="reference internal" href="../furiosa_llm/reference/llm_engine.html">LLMEngine class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../furiosa_llm/reference/async_llm_engine.html">AsyncLLMEngine class</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../furiosa_llm/examples.html">Examples</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../furiosa_llm/examples/llm_chat.html">Chat</a></li>
<li class="toctree-l2"><a class="reference internal" href="../furiosa_llm/examples/llm_chat_with_tools.html">Chat with tools</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../furiosa_llm/k8s_deployment.html">Deploying Furiosa-LLM on Kubernetes</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Cloud Native Toolkit</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Cloud Native Toolkit</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Container Support</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="kubernetes.html">Kubernetes Plugins</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="kubernetes/feature_discovery.html">Installing Furiosa Feature Discovery</a></li>
<li class="toctree-l2"><a class="reference internal" href="kubernetes/device_plugin.html">Installing Furiosa Device Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="kubernetes/metrics_exporter.html">Installing Furiosa Metrics Exporter</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Device Management</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../device_management/system_management_interface.html">Furiosa SMI</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../device_management/system_management_interface/furiosa_smi_cli.html">Furiosa SMI CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../device_management/system_management_interface/furiosa_smi_lib.html">Furiosa SMI Library</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Tutorials and Examples</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference external" href="https://github.com/furiosa-ai/sdk-cookbook">FuriosaAI SDK CookBook</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Customer Support</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference external" href="https://forums.furiosa.ai">Forums</a></li>
<li class="toctree-l1"><a class="reference external" href="https://furiosa-ai.atlassian.net/servicedesk/customer/portals/">Customer Support</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Other Links</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference external" href="https://furiosa.ai">FuriosaAI Homepage</a></li>
<li class="toctree-l1"><a class="reference external" href="https://furiosa-ai.github.io/docs/latest/en/">Furiosa Gen 1 NPU SDK Doc</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item"><img id='furiosa_logo' width="100" /></div>
      <div class="sidebar-primary-item">

  <p class="copyright">
    
      © Copyright 2025 FuriosaAI Inc.
      <br/>
    
  </p>
</div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button></div>
      
        <div class="header-article-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="header-article-item"><button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Container Support</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2>  </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#container-runtime-support">Container Runtime Support</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#container-device-interface-support">Container Device Interface Support</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#installing-furiosa-cdi-cli">Installing <code class="docutils literal notranslate"><span class="pre">furiosa-cdi</span></code> CLI</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#generating-cdi-specification">Generating CDI Specification</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#configuring-container-runtimes">Configuring Container Runtimes</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#docker">Docker</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#containerd">ContainerD</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cri-o">CRI-O</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#assign-furiosa-npus-to-containers-using-cdi">Assign Furiosa NPUs to Containers using CDI</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#assign-furiosa-npus-to-containers-manually">Assign Furiosa NPUs to Containers Manually</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="container-support">
<span id="container"></span><h1>Container Support<a class="headerlink" href="#container-support" title="Link to this heading">#</a></h1>
<section id="container-runtime-support">
<h2>Container Runtime Support<a class="headerlink" href="#container-runtime-support" title="Link to this heading">#</a></h2>
<p>We do support the following versions of container runtimes:</p>
<ul class="simple">
<li><p>Docker: v25.0.0 or later</p></li>
<li><p>ContainerD: v1.7.0 or later</p></li>
<li><p>CRI-O: v1.28.0 or later</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The supported container runtimes above (Docker, ContainerD, CRI-O) are validated with the default low-level container runtime <code class="docutils literal notranslate"><span class="pre">runc</span></code>.
Other low-level runtimes or isolation technologies (such as <code class="docutils literal notranslate"><span class="pre">crun</span></code>, <code class="docutils literal notranslate"><span class="pre">gVisor</span></code>, or <code class="docutils literal notranslate"><span class="pre">firecracker</span></code>) are not officially tested and may have compatibility limitations.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Some container runtimes use default seccomp profiles that filter out the following <code class="docutils literal notranslate"><span class="pre">io_uring</span></code> syscalls due to <a class="reference external" href="https://github.com/moby/moby/pull/46762">security considerations</a>:</p>
<ul class="simple">
<li><p>io_uring_setup</p></li>
<li><p>io_uring_enter</p></li>
<li><p>io_uring_register</p></li>
</ul>
<p>RNGD driver relies on these syscalls. Therefore, users must either create and apply a custom seccomp profile explicitly permitting these syscalls or run containers with the unconfined seccomp setting.</p>
</div>
</section>
<section id="container-device-interface-support">
<h2>Container Device Interface Support<a class="headerlink" href="#container-device-interface-support" title="Link to this heading">#</a></h2>
<p>Container Device Interface (CDI) is a standard interface and specification for exposing devices to container runtimes.
It provides abstract mechanisms required to allocate and expose these devices to containers.
This abstraction simplifies device management and enhances user experience by hiding complex device integration details.</p>
<section id="installing-furiosa-cdi-cli">
<h3>Installing <code class="docutils literal notranslate"><span class="pre">furiosa-cdi</span></code> CLI<a class="headerlink" href="#installing-furiosa-cdi-cli" title="Link to this heading">#</a></h3>
<p>To install the <code class="docutils literal notranslate"><span class="pre">furiosa-cdi</span></code> CLI, install the <code class="docutils literal notranslate"><span class="pre">furiosa-cdi</span></code> package.</p>
<p>The minimum requirements for installing <code class="docutils literal notranslate"><span class="pre">furiosa-cdi</span></code> package are as follows:</p>
<ul class="simple">
<li><p>Ubuntu 22.04 LTS (Debian Bookworm) or later</p></li>
<li><p>Linux Kernel 6.3 or later</p></li>
<li><p>Administrator privileges on system (root)</p></li>
<li><p><a class="reference internal" href="../getting_started/prerequisites.html#aptsetup"><span class="std std-ref">Setting up APT</span></a> and <a class="reference internal" href="../getting_started/prerequisites.html#installingprerequisites"><span class="std std-ref">Installing Prerequisites</span></a></p></li>
</ul>
<p>Then, please install the <code class="docutils literal notranslate"><span class="pre">furiosa-cdi</span></code> package as follows:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt<span class="w"> </span>update
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>furiosa-cdi
</pre></div>
</div>
<p>This command installs packages <code class="docutils literal notranslate"><span class="pre">furiosa-libsmi</span></code> and <code class="docutils literal notranslate"><span class="pre">furiosa-cdi</span></code>.</p>
</section>
<section id="generating-cdi-specification">
<h3>Generating CDI Specification<a class="headerlink" href="#generating-cdi-specification" title="Link to this heading">#</a></h3>
<p>Following command generates a CDI specification file in the <code class="docutils literal notranslate"><span class="pre">/etc/cdi</span></code> directory, enabling your container runtime to identify and manage Furiosa NPUs as CDI resources.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>furiosa-cdi<span class="w"> </span>generate
</pre></div>
</div>
</section>
<section id="configuring-container-runtimes">
<h3>Configuring Container Runtimes<a class="headerlink" href="#configuring-container-runtimes" title="Link to this heading">#</a></h3>
<p>Depending on the container runtime and version, CDI feature may need to be explicitly enabled through configuration.
The section below provides detailed instructions for configuring CDI for each supported runtime.</p>
<section id="docker">
<h4>Docker<a class="headerlink" href="#docker" title="Link to this heading">#</a></h4>
<p>Docker currently supports CDI as an experimental feature.
Update the Docker daemon configuration file <code class="docutils literal notranslate"><span class="pre">daemon.json</span></code> to enable CDI feature and include <code class="docutils literal notranslate"><span class="pre">/etc/cdi</span></code> in the <code class="docutils literal notranslate"><span class="pre">cdi-spec-dirs</span></code> setting.
Below is an example of <code class="docutils literal notranslate"><span class="pre">daemon.json</span></code> configuration:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;features&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="nt">&quot;cdi&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;cdi-spec-dirs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;/etc/cdi/&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;/var/run/cdi&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>For more details, refer to the official Docker documentation on <a class="reference external" href="https://docs.docker.com/reference/cli/dockerd/#enable-cdi-devices">enabling CDI devices</a>.</p>
</section>
<section id="containerd">
<h4>ContainerD<a class="headerlink" href="#containerd" title="Link to this heading">#</a></h4>
<p>ContainerD supports CDI starting from version 2.0.0 by default.
For earlier versions, CDI must be explicitly enabled through the configuration file config.toml, typically located at <code class="docutils literal notranslate"><span class="pre">/etc/containerd/config.toml</span></code>.</p>
<p>To enable CDI support, add the following configuration:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[plugins.</span><span class="s2">&quot;io.containerd.grpc.v1.cri&quot;</span><span class="k">]</span>
<span class="n">enable_cdi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="n">cdi_spec_dirs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;/etc/cdi&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;/var/run/cdi&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>After modifying the configuration, restart ContainerD to apply the changes:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>containerd
</pre></div>
</div>
<p>For more details, refer to the official ContainerD documentation on <a class="reference external" href="https://github.com/containerd/containerd/blob/main/docs/cri/config.md">enabling CDI support</a>.</p>
</section>
<section id="cri-o">
<h4>CRI-O<a class="headerlink" href="#cri-o" title="Link to this heading">#</a></h4>
<p>CRI-O enables CDI support by default, configured to use the standard CDI directories <code class="docutils literal notranslate"><span class="pre">/etc/cdi</span></code> and <code class="docutils literal notranslate"><span class="pre">/var/run/cdi</span></code>.</p>
</section>
</section>
<section id="assign-furiosa-npus-to-containers-using-cdi">
<h3>Assign Furiosa NPUs to Containers using CDI<a class="headerlink" href="#assign-furiosa-npus-to-containers-using-cdi" title="Link to this heading">#</a></h3>
<p>After generating the CDI specification, use the furiosa-cdi list command to discover available NPU resources.
The special entry <code class="docutils literal notranslate"><span class="pre">all</span></code> aggregates all available NPUs for simultaneous allocation:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>furiosa-cdi<span class="w"> </span>list
+----------------+------+
<span class="p">|</span><span class="w">      </span>KIND<span class="w">      </span><span class="p">|</span><span class="w"> </span>NAME<span class="w"> </span><span class="p">|</span>
+----------------+------+
<span class="p">|</span><span class="w">                </span><span class="p">|</span><span class="w"> </span>npu0<span class="w"> </span><span class="p">|</span>
<span class="p">|</span><span class="w">                </span><span class="p">|</span><span class="w"> </span>npu1<span class="w"> </span><span class="p">|</span>
<span class="p">|</span><span class="w">                </span><span class="p">|</span><span class="w"> </span>npu2<span class="w"> </span><span class="p">|</span>
<span class="p">|</span><span class="w">                </span><span class="p">|</span><span class="w"> </span>npu3<span class="w"> </span><span class="p">|</span>
<span class="p">|</span><span class="w"> </span>furiosa.ai/npu<span class="w"> </span><span class="p">|</span><span class="w"> </span>npu4<span class="w"> </span><span class="p">|</span>
<span class="p">|</span><span class="w">                </span><span class="p">|</span><span class="w"> </span>npu5<span class="w"> </span><span class="p">|</span>
<span class="p">|</span><span class="w">                </span><span class="p">|</span><span class="w"> </span>npu6<span class="w"> </span><span class="p">|</span>
<span class="p">|</span><span class="w">                </span><span class="p">|</span><span class="w"> </span>npu7<span class="w"> </span><span class="p">|</span>
<span class="p">|</span><span class="w">                </span><span class="p">|</span><span class="w"> </span>all<span class="w">  </span><span class="p">|</span>
+----------------+------+
</pre></div>
</div>
<p>Below is an example of assigning <code class="docutils literal notranslate"><span class="pre">npu0</span></code> to a Docker container using CDI:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>--security-opt<span class="w"> </span><span class="nv">seccomp</span><span class="o">=</span>unconfined<span class="w"> </span>--device<span class="o">=</span>furiosa.ai/npu<span class="o">=</span>npu0<span class="w"> </span>-it<span class="w"> </span>ubuntu:latest<span class="w"> </span>/bin/bash
</pre></div>
</div>
<p>To allocate multiple NPUs, repeat the <code class="docutils literal notranslate"><span class="pre">--device</span></code> option or use the <code class="docutils literal notranslate"><span class="pre">all</span></code> entry:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># Allocating multiple NPUs</span>
docker<span class="w"> </span>run<span class="w"> </span>--security-opt<span class="w"> </span><span class="nv">seccomp</span><span class="o">=</span>unconfined<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="o">=</span>furiosa.ai/npu<span class="o">=</span>npu0<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="o">=</span>furiosa.ai/npu<span class="o">=</span>npu1<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-it<span class="w"> </span>ubuntu:latest<span class="w"> </span>/bin/bash

<span class="c1"># Allocating all NPUs at once</span>
docker<span class="w"> </span>run<span class="w"> </span>--security-opt<span class="w"> </span><span class="nv">seccomp</span><span class="o">=</span>unconfined<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="o">=</span>furiosa.ai/npu<span class="o">=</span>all<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-it<span class="w"> </span>ubuntu:latest<span class="w"> </span>/bin/bash
</pre></div>
</div>
<p>Similarly, for ContainerD (ctr/nerdctl) and CRI-O, use their respective CDI syntax to reference Furiosa NPU devices.</p>
</section>
</section>
<section id="assign-furiosa-npus-to-containers-manually">
<h2>Assign Furiosa NPUs to Containers Manually<a class="headerlink" href="#assign-furiosa-npus-to-containers-manually" title="Link to this heading">#</a></h2>
<p>In environments where CDI support is unavailable or if manual allocation of Furiosa NPUs is preferred, this section provides guidance for manually assigning Furiosa NPUs to containers.</p>
<p>To use a Furiosa NPU inside a container, the corresponding device nodes must be mapped into the container.
Each Furiosa card has 35 required device nodes. The device node paths follow the format below, where <code class="docutils literal notranslate"><span class="pre">{index}</span></code> represents the NPU device number (e.g., <code class="docutils literal notranslate"><span class="pre">npu0</span></code>, <code class="docutils literal notranslate"><span class="pre">npu1</span></code>):</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>/dev/rngd/npu{index}bar0
/dev/rngd/npu{index}bar2
/dev/rngd/npu{index}bar4
/dev/rngd/npu{index}ch0
/dev/rngd/npu{index}ch0r
/dev/rngd/npu{index}ch1
/dev/rngd/npu{index}ch1r
/dev/rngd/npu{index}ch2
/dev/rngd/npu{index}ch2r
/dev/rngd/npu{index}ch3
/dev/rngd/npu{index}ch3r
/dev/rngd/npu{index}ch4
/dev/rngd/npu{index}ch4r
/dev/rngd/npu{index}ch5
/dev/rngd/npu{index}ch5r
/dev/rngd/npu{index}ch6
/dev/rngd/npu{index}ch6r
/dev/rngd/npu{index}ch7
/dev/rngd/npu{index}ch7r
/dev/rngd/npu{index}dmar
/dev/rngd/npu{index}mgmt
/dev/rngd/npu{index}pe0
/dev/rngd/npu{index}pe0-1
/dev/rngd/npu{index}pe0-3
/dev/rngd/npu{index}pe1
/dev/rngd/npu{index}pe2
/dev/rngd/npu{index}pe2-3
/dev/rngd/npu{index}pe3
/dev/rngd/npu{index}pe4
/dev/rngd/npu{index}pe4-5
/dev/rngd/npu{index}pe4-7
/dev/rngd/npu{index}pe5
/dev/rngd/npu{index}pe6
/dev/rngd/npu{index}pe6-7
/dev/rngd/npu{index}pe7
</pre></div>
</div>
<p>Below is an example of how to assign the device nodes for <code class="docutils literal notranslate"><span class="pre">npu0</span></code> to a container using Docker.
For ContainerD (ctr/nerdctl) and CRI-O, pass the device nodes listed above and configure the required seccomp settings.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>--security-opt<span class="w"> </span><span class="nv">seccomp</span><span class="o">=</span>unconfined<span class="w"> </span>-it<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0bar0:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0bar2:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0bar4:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0ch0:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0ch0r:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0ch1:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0ch1r:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0ch2:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0ch2r:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0ch3:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0ch3r:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0ch4:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0ch4r:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0ch5:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0ch5r:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0ch6:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0ch6r:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0ch7:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0ch7r:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0dmar:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0mgmt:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0pe0:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0pe0-1:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0pe0-3:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0pe1:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0pe2:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0pe2-3:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0pe3:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0pe4:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0pe4-5:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0pe4-7:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0pe5:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0pe6:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0pe6-7:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/rngd/npu0pe7:rw<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>ubuntu:latest<span class="w"> </span>/bin/bash
</pre></div>
</div>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="intro.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Cloud Native Toolkit</p>
      </div>
    </a>
    <a class="right-next"
       href="kubernetes.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Kubernetes Plugins</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> 
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#container-runtime-support">Container Runtime Support</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#container-device-interface-support">Container Device Interface Support</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#installing-furiosa-cdi-cli">Installing <code class="docutils literal notranslate"><span class="pre">furiosa-cdi</span></code> CLI</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#generating-cdi-specification">Generating CDI Specification</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#configuring-container-runtimes">Configuring Container Runtimes</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#docker">Docker</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#containerd">ContainerD</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cri-o">CRI-O</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#assign-furiosa-npus-to-containers-using-cdi">Assign Furiosa NPUs to Containers using CDI</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#assign-furiosa-npus-to-containers-manually">Assign Furiosa NPUs to Containers Manually</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By FuriosaAI, Inc.
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025 FuriosaAI Inc.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>